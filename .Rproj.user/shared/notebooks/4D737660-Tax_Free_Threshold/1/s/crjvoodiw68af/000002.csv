"0","##################################################################"
"0","##  Scraping data on historical TFT rates from the ATO website  ##"
"0","##################################################################"
"0","tft_history_ato_web_scrape <- tibble("
"0","  years = read_html('https://www.ato.gov.au/Rates/Individual-income-tax-for-prior-years/') %>% "
"0","    html_nodes(xpath = '//*[(@id = ""content-main-wrap"")]//h3') %>% "
"0","    html_text(), "
"0","  ""Income Threshold"" = read_html('https://www.ato.gov.au/Rates/Individual-income-tax-for-prior-years/') %>% "
"0","  html_nodes(xpath = '//tr[(((count(preceding-sibling::*) + 1) = 2) and parent::*)]//td[(((count(preceding-sibling::*) + 1) = 1) and parent::*)]//p') %>% "
"0","  html_text() %>% "
"0","    str_extract_all(pattern = ""(?<=\\$)\\d\\d?,\\d{3}"") %>% "
"0","    str_remove_all("","") %>% "
"0","    as.numeric()"
"0",") %>% "
"0","  mutate("
"0","    ""Real Threshold"" = `Income Threshold` * 1.03^(as.numeric(rownames(.)) - 1),"
"0","    years            = recode(years, ""1999â€“2000"" = ""1999-00"")"
"0","  ) %>% "
"0","  gather(key = measure, value = ""TFT Threshold"", -years)"
"0",""
